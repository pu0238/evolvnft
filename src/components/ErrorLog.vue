<template>
  <div v-if="isErrorPopoutValue" class="fixed z-10 left-1/2 -translate-x-2/4">
    <div
      class="bg-black md:w-[38rem] float-left p-8 sm:p-12 md:p-14 rounded-[3rem]"
    >
      <div class="w-full float-left flex items-center">
        <svg
          width="78"
          height="69"
          viewBox="0 0 78 69"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="float-left"
        >
          <path
            d="M77.1221 59.2986C79.6216 63.6103 76.4842 69 71.4919 69H6.50735C1.50547 69 -1.61751 63.602 0.877132 59.2986L33.3698 3.23235C35.8706 -1.08136 42.134 -1.07354 44.6302 3.23235L77.1221 59.2986ZM39 47.707C35.5598 47.707 32.7709 50.4825 32.7709 53.9062C32.7709 57.33 35.5598 60.1055 39 60.1055C42.4403 60.1055 45.2292 57.33 45.2292 53.9062C45.2292 50.4825 42.4403 47.707 39 47.707ZM33.086 25.4241L34.0905 43.7522C34.1375 44.6098 34.85 45.2812 35.7131 45.2812H42.287C43.15 45.2812 43.8626 44.6098 43.9096 43.7522L44.9141 25.4241C44.9649 24.4977 44.2237 23.7188 43.2915 23.7188H34.7084C33.7762 23.7188 33.0352 24.4977 33.086 25.4241Z"
            fill="#6366F1"
          />
        </svg>
        <h2
          class="float-left text-5xl xl:text-7xl font-cal text-white flex-auto"
        >
          hey!
        </h2>
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="self-start cursor-pointer fill-white hover:fill-indigo-500 ease-out duration-200"
          @click="close()"
        >
          <path
            d="M23.4684 0.549793C23.3 0.381037 23.1 0.247152 22.8798 0.155803C22.6595 0.0644534 22.4234 0.0174325 22.185 0.0174325C21.9467 0.0174325 21.7105 0.0644534 21.4903 0.155803C21.2701 0.247152 21.0701 0.381037 20.9017 0.549793L12 9.43326L3.09833 0.531589C2.9298 0.363054 2.72971 0.229366 2.50951 0.138155C2.28931 0.0469448 2.05331 1.7758e-09 1.81496 0C1.57662 -1.7758e-09 1.3406 0.0469448 1.1204 0.138155C0.900203 0.229366 0.700123 0.363054 0.531589 0.531589C0.363054 0.700123 0.229366 0.900203 0.138155 1.1204C0.0469448 1.3406 -1.7758e-09 1.57662 0 1.81496C1.7758e-09 2.05331 0.0469448 2.28931 0.138155 2.50951C0.229366 2.72971 0.363054 2.9298 0.531589 3.09833L9.43326 12L0.531589 20.9017C0.363054 21.0702 0.229366 21.2702 0.138155 21.4904C0.0469448 21.7106 0 21.9467 0 22.185C0 22.4234 0.0469448 22.6594 0.138155 22.8796C0.229366 23.0998 0.363054 23.2999 0.531589 23.4684C0.700123 23.637 0.900203 23.7707 1.1204 23.8619C1.3406 23.9531 1.57662 24 1.81496 24C2.05331 24 2.28931 23.9531 2.50951 23.8619C2.72971 23.7707 2.9298 23.637 3.09833 23.4684L12 14.5667L20.9017 23.4684C21.0702 23.637 21.2702 23.7707 21.4904 23.8619C21.7106 23.9531 21.9467 24 22.185 24C22.4234 24 22.6594 23.9531 22.8796 23.8619C23.0998 23.7707 23.2999 23.637 23.4684 23.4684C23.637 23.2999 23.7707 23.0998 23.8619 22.8796C23.9531 22.6594 24 22.4234 24 22.185C24 21.9467 23.9531 21.7106 23.8619 21.4904C23.7707 21.2702 23.637 21.0702 23.4684 20.9017L14.5667 12L23.4684 3.09833C24.1602 2.40659 24.1602 1.24154 23.4684 0.549793Z"
          />
        </svg>
      </div>
      <p
        class="w-full float-left :text-xl xl:text-2xl font-josefin text-zinc-300 mt-8"
      >
        {{ errorMessageValue }}
      </p>
    </div>
  </div>
</template>

<script lang="ts">
import { useStore } from '@nanostores/vue';
import { errorMessage, isErrorPopout } from '../state/error';
import { computed } from 'vue';

export default {
  props: {},
  methods: {
    close() {
      isErrorPopout.set(false);
    },
  },
  setup() {
    const $isErrorPopout = useStore(isErrorPopout);
    const $errorMessage = useStore(errorMessage);

    return {
      isErrorPopoutValue: computed(() => $isErrorPopout.value),
      errorMessageValue: computed(() => $errorMessage.value),
    };
  },
};
</script>
